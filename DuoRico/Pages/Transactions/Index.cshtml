@page "{type:alpha}"

@model DuoRico.Pages_Transactions.IndexModel

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">Transações</h2>
        <form method="get" class="row g-3 align-items-end">
            <input type="hidden" asp-for="Type" />

            <div class="col-md">
                <label asp-for="SelectMonth" class="form-label">Mês</label>
                <select asp-for="SelectMonth" asp-items="Model.MonthOptions" class="form-select"></select>
            </div>
            <div class="col-md">
                <label asp-for="SelectYear" class="form-label">Ano</label>
                <select asp-for="SelectYear" asp-items="Model.YearOptions" class="form-select"></select>
            </div>
            <div class="col-md-auto">
                <button type="submit" class="btn btn-primary w-100">Filtrar</button>
            </div>
        </form>

        <a asp-page="Create" asp-route-type="@Model.Type" class="btn btn-success">Nova Transação</a>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>Descrição</th>
                <th>Valor R$</th>
                <th>Categoria</th>
                <th>Pago</th>
                <th>Parcela Atual</th>
                <th>Total de Parcelas</th>
                <th>Criado em</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.TransactionList)
            {
                <tr>
                    <td>@item.Description</td>
                    <td>@item.Amount.ToString("C", new System.Globalization.CultureInfo("pt-BR"))</td>
                    <td>@item.Category</td>
                    <td>@(item.IsPaid ? "Sim" : "Não")</td>
                    <td>@item.InstallmentNumber</td>
                    <td>@item.TotalInstallments</td>
                    <td>@item.CreatedAt.ToString("dd/MM/yyyy")</td>
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.Id" asp-route-type="@Model.Type">Editar</a>
                        <a asp-page="./Delete" asp-route-id="@item.Id" asp-route-type="@Model.Type">Excluir</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
